pipeline {
    agent any
    

    stages {
            stage("Build") {
            steps {
               echo "building is automated by apache maven"
            }}
        
            stage("Unit and Integration Tests") {
                steps {
                   echo "Unit and Integration Tests is done by TestComplete"
            } }
        
            stage("Code Analysis") {
                steps {
                   echo "Code Analysis is done by PMD "
            } }
        
           stage("Security Scan") {
    steps {
        echo "Security Scan is done by snyk security"
    }


post {
    success {
        mail to: "nirmaldj2001@gmail.com",
        subject: "Security scan completed",
        attachLog: true,
        body: "Status: SUCCESS"
    }
    failure {
        mail to: "nirmaldj2001@gmail.com",
        subject: "Security scan completed",
        attachLog: true,
        body: "Status: FAILURE"
    }
}
           }
        
            stage("Deploy to Staging") {
                steps {
                   echo "Deploy to Staging is done through AWS EC2 instance"
            }
            }
        
        stage("Integration Tests on Staging") {
            steps {
               echo "Integration Tests on Staging "
            }}
           
         stage("Deploy to Production") {
            
            steps {
               echo "Deployment is done through AWS EC2 instance server"
            }}

      

        }
        }
        
        
        
